Internet Engineering Task Force (IETF)                       T. Algarra
Request for Comments: XXXX                   Hamburg University of Technology
Category: Experimental                                         (Month Year)
ISSN: 2070-1721


        Quality of Service Extension Block for the Bundle Protocol

Abstract

   This document defines an Experimental Specification for a Quality of
   Service (QoS) Extension Block for the Bundle Protocol Version 7
   (BPv7).  The QoS Extension Block enables users to request and
   indicate Quality of Service parameters, such as traffic
   prioritization, retransmission, latest-only delivery, and bundle
   storage preference, in Delay/Disruption Tolerant Networking (DTN)
   environments.  The purpose of this extension is to enhance the
   efficiency of bundle forwarding and delivery according to user
   requirements while maintaining interoperability with existing Bundle
   Protocol implementations.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire in (Month Year + 6 months).

Copyright Notice

   Copyright (c) (Year) IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.


1.  Introduction

1.1.  Purpose

   This document specifies an experimental extension block for the
   Bundle Protocol Version 7 (BPv7) [RFC9171] to support the signaling
   of Quality of Service (QoS) parameters between Bundle Protocol nodes.
   The extension enables users to influence bundle forwarding behavior
   in Delay- and Disruption-Tolerant Networks (DTNs).

1.2.  Scope

   The QoS Extension Block (QEB) provides a mechanism to include user-
   defined QoS parameters within a bundle.  These parameters allow nodes
   to apply differentiated processing, storage, or forwarding based on
   the desired QoS characteristics.

1.3.  Applicability

   This specification applies to any BPv7-compliant node that supports
   sending, storing, or forwarding bundles and chooses to process or
   generate the QoS Extension Block.  Nodes that do not support this
   extension must forward the block unchanged.

1.4.  Rationale

   QoS mechanisms enhance the efficiency of communications over
   constrained or intermittent networks by prioritizing traffic,
   reducing unnecessary retransmissions, and enabling context-aware
   bundle handling.  In DTN environments—such as space or remote
   terrestrial networks—bandwidth and storage are limited, making QoS
   signaling essential to effective resource management.

1.5.  Definitions and Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14 [RFC2119]
   [RFC8174] when, and only when, they appear in all capitals, as shown
   here.


2.  Overview

   Previous mechanisms for QoS in DTN environments—such as the Extended
   Class of Service (ECOS) extension for BPv6 [CCSDS-734.2-B-1] or the
   cardinal priorities defined in [RFC4838]—provided limited flexibility
   and scalability.  Bundle Protocol Version 7 [RFC9171] does not
   include intrinsic QoS signaling; therefore, this extension provides
   a structured and extensible method for users to express QoS
   preferences.

   The QoS parameters supported by this specification include:

   *  Traffic Prioritization – bundle forwarding precedence
   *  Retransmission – desired use of reliable or unreliable convergence
      layers
   *  Latest-Only Delivery – indication to drop outdated information
   *  Bundle Storage – deletion preference when node storage is full

   The QoS Extension Block (QEB) is designed to be backward-compatible:
   nodes that do not recognize it will forward the bundle transparently.


3.  Quality of Service Extension Block

3.1.  General Description

   The QoS Extension Block (QEB) follows the canonical bundle block
   format defined in [RFC9171].  The block type code for the QEB
   SHALL be assigned by IANA (see Section 5).

   The QEB MAY be added only by the source node of a bundle and SHALL
   NOT be modified by any other node.  It is RECOMMENDED that the QEB
   be integrity-protected via a Bundle Integrity Block (BIB) as defined
   in [CCSDS-734.5-R-2].

   The block-type-specific data SHALL be encoded as a definite-length
   CBOR [RFC8949] byte string containing a definite-length CBOR map.
   Each map key identifies a QoS parameter, and the associated value
   specifies its setting.  Each QoS parameter MUST appear at most once.

   Table 1 defines the assigned CBOR map keys.

       +-----------------------+------------------------------+
       | QoS Parameter         | CBOR Key (Unsigned Integer)  |
       +-----------------------+------------------------------+
       | Traffic Prioritization| 0                            |
       | Retransmission        | 1                            |
       | Latest-Only Delivery  | 2                            |
       | Bundle Storage        | 3                            |
       | Reserved              | 4–11                         |
       | Private Use           | 12–23                        |
       +-----------------------+------------------------------+

                                 Table 1


3.2.  QoS Parameters

3.2.1.  Traffic Prioritization

   Traffic prioritization determines the forwarding order when multiple
   bundles are queued.  Three main classes are defined: EXPEDITED,
   NORMAL, and BULK.  The CBOR-encoded values are shown in Table 2.

       +-------------------+------------------+
       | Priority Class    | Value (Unsigned) |
       +-------------------+------------------+
       | EXPEDITED         | 0                |
       | NORMAL            | 1–4              |
       | BULK              | 5–8              |
       +-------------------+------------------+

                                 Table 2

   Bundles marked as EXPEDITED MUST be forwarded before any other
   bundles from the same user.  Bundles marked NORMAL MUST be forwarded
   before BULK bundles from that user.  Bundles without a priority
   marking MUST be treated as having value 5 (default BULK).

3.2.2.  Retransmission

   The retransmission parameter defines whether a bundle SHOULD be
   transmitted through an underlying protocol stack that provides
   retransmission.  The CBOR-encoded values are shown in Table 3.

       +-----------------------------+------------------+
       | Retransmission Requirement  | Value            |
       +-----------------------------+------------------+
       | RETRANSMISSION REQUIRED     | 1                |
       | RETRANSMISSION IF POSSIBLE  | 2                |
       | NO RETRANSMISSION           | -1               |
       | NO RETRANSMISSION IF POSSIBLE| -2              |
       +-----------------------------+------------------+

                                 Table 3

   Bundles marked "RETRANSMISSION REQUIRED" MUST only be transmitted via
   a protocol stack that supports retransmission.  Bundles marked "NO
   RETRANSMISSION" MUST only be transmitted over non-retransmitting
   protocol stacks.

3.2.3.  Latest-Only Delivery

   The latest-only delivery parameter indicates whether older bundles
   with the same source and destination should be discarded when newer
   ones exist.  The CBOR-encoded values are shown in Table 4.

       +-------------------+------------------+
       | Delivery Option   | Value (Unsigned) |
       +-------------------+------------------+
       | ALL VALID         | 0                |
       | LATEST-ONLY       | 1                |
       +-------------------+------------------+

                                 Table 4

   When LATEST-ONLY is indicated, intermediate nodes MUST discard older
   bundles that share the same source and destination identifiers and
   have an older creation timestamp.

3.2.4.  Bundle Storage

   The bundle storage parameter indicates the deletion order when a node
   runs out of storage.  Lower class numbers correspond to higher
   retention priority.

       +-------------------+------------------+
       | Storage Class     | Value (Unsigned) |
       +-------------------+------------------+
       | CLASS 0 (highest) | 0                |
       | CLASS 1           | 1                |
       | ...               | ...              |
       | CLASS 23 (lowest) | 23               |
       +-------------------+------------------+

                                 Table 5

   Bundles in lower-numbered storage classes MUST NOT be deleted while
   any bundles in higher-numbered classes remain stored.


4.  Security Considerations

   The QoS Extension Block may influence forwarding and prioritization
   behavior, and therefore could be exploited by malicious actors to
   monopolize network resources (e.g., marking all bundles EXPEDITED).
   Implementations SHOULD include access control, authentication, or
   rate-limiting mechanisms to prevent abuse.

   Integrity protection for the QEB is RECOMMENDED using a Bundle
   Integrity Block (BIB) as specified in [CCSDS-734.5-R-2].  Nodes MAY
   also enforce policy checks to validate user permissions for QoS
   requests.


5.  IANA Considerations

   IANA is requested to allocate a new BPv7 Extension Block Type code
   for the "Quality of Service Extension Block (QEB)".

   Additionally, the following new registries are requested:

   *  "Bundle Protocol QoS Parameter Keys"
   *  "Bundle Protocol QoS Parameter Values"

   Initial registry contents are defined in Tables 1–5 of this
   document.  Future assignments are to be made through Expert Review.


6.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997.

   [RFC4838]  Cerf, V., et al., "Delay-Tolerant Networking Architecture",
              RFC 4838, DOI 10.17487/RFC4838, April 2007.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174,
              DOI 10.17487/RFC8174, May 2017.

   [RFC8949]  Bormann, C. and P. Hoffman, "Concise Binary Object
              Representation (CBOR)", RFC 8949,
              DOI 10.17487/RFC8949, December 2020.

   [RFC9171]  Burleigh, S., Fall, K., and E. Birrane, "Bundle Protocol
              Version 7", RFC 9171, DOI 10.17487/RFC9171, January 2022.

   [CCSDS-734.5-R-2]  Consultative Committee for Space Data Systems,
              "Bundle Protocol Security Specification", Red Book,
              September 2023.

   [CCSDS-734.2-B-1]  Consultative Committee for Space Data Systems,
              "CCSDS Bundle Protocol Specification", Blue Book,
              September 2015.

Author's Address

   Teresa Algarra
   Hamburg University of Technology
   Hamburg, Germany

   Email: teresa.algarra@example.org
